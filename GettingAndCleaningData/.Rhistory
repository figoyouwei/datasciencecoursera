769.08/26
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/sectionIndex.R', echo=TRUE)
length(values)
sum(values)
1350/2
q()
dat_hg <- read.table("/Users/youweizheng/Google Drive/HusbandStock/20140715HG.txt")
q()
dat_hg <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/huigou.xlsx",
sheetName = "Sheet1")
library(xlsx)
dat_hg <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/huigou.xlsx",
sheetName = "Sheet1")
View(dat_hg)
dat_hg$byMonth <- floor_date(dat_hg$Date, "month")
library(lubridate)
library(plyr)
dat_hg$byMonth <- floor_date(dat_hg$Date, "month")
View(dat_hg)
monthly_hg <- ddply(dat_hg, "byMonth", summarise, monthly = sum(Profit))
source('~/Google Drive/HusbandStock/analysis.R', echo=TRUE)
q()
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
dat_tr$Profit <- as.numeric(dat_tr$Profit)
## ----- sum up all single-trade profits
total_tr_profit <- sum(as.numeric(dat_tr$Profit),na.rm=TRUE)
library(lubridate)
library(plyr)
dat_tr$byMonth <- floor_date(dat_tr$Date, "month")
monthly_tr <- ddply(dat_tr, "byMonth", summarise, monthly = sum(Profit))
dat_br <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/broker.xlsx",
sheetName = "Sheet1")
total_br_profit <- sum(dat_br$Income,na.rm=TRUE)
dat_hg <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/huigou.xlsx",
sheetName = "Sheet1")
dat_hg$byMonth <- floor_date(dat_hg$Date, "month")
monthly_hg <- ddply(dat_hg, "byMonth", summarise, monthly = sum(Profit))
cat("\014")
sprintf("total trade profit: %.2f", total_tr_profit)
monthly_tr
monthly_hg
sprintf("total trade profit: %.2f", total_tr_profit)
monthly_tr
monthly_hg
sprintf("total broker profit: %.2f", total_br_profit)
sprintf("total trade profit: %.2f", total_tr_profit)
monthly_tr
monthly_hg
sprintf("total broker income: %.2f", total_br_profit)
q()
source("http://bioconductor.org/biocLite.R")
biocLite("rhdf5")
created <- h5createFile("example.h5")
h5createFile("myhdf5file.h5")
library("rhdf5")
created <- h5createFile("example.h5")
?hdf5s
?h5ls
q()
library("rhdf5")
created <- h5createFile("example.h5")
created <- h5createFile("exampleHDF5.h5")
h5createGroup("exampleHDF5.h5","foo")
h5createGroup("exampleHDF5.h5","foo/foobaa")
h5ls("exampleHDF5.h5")
h5createGroup("exampleHDF5.h5","baa")
h5ls("exampleHDF5.h5")
h5createGroup("exampleHDF5.h5","baa")
A <- matrix(1:10,nr=5,nc=2)
A
h5write(A,"exampleHDF5.h5","foo/A")
h5ls("exampleHDF5.h5")
h5write(A,"exampleHDF5.h5","A")
h5ls("exampleHDF5.h5")
B <- array(seq(0.1,2.0,by=0.1),dim=c(5,2,2))
class(A)
class(B)
C <- c(5,2,2)
class(C)
h5write(A,"exampleHDF5.h5","baa/B")
h5ls("exampleHDF5.h5")
h5ls("/Users/youweizheng/Google Drive/AAAAA/rep2.h5")
h5ls("/Users/youweizheng/Google Drive/AAAAA/rep2.h5")
C = matrix(paste(LETTERS[1:10],LETTERS[11:20], collapse=""),nr=2,nc=5)
class(C)
class(B)
B
B[1]
B[2]
A
A[1]
A[1,1]
A[1,2]
A[2,2]
array
B
B[,,1]
B[,,1][1,1]
B[,,1][1,2]
B
C
A
?matrix
h5write(C, "myhdf5file.h5","foo/foobaa/C")
rm(list=ls())
cat("\014")
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
A <- matrix(1:10,nr=5,nc=2)
h5write(A,filename,"foo/A")
B <- array(seq(0.1,2.0,by=0.1),dim=c(5,2,2))
h5write(B,filename,"baa/B")
h5write(B,filename,"foo/B")
C = matrix(paste(LETTERS[1:10],LETTERS[11:20], collapse=""),nr=2,nc=5)
h5write(C,filename,"foo/foobaa/C")
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
h5write(B,filename,"baa/B")
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
h5write(B,filename,"baa/B")
h5ls(filename)
D = h5read(filename,"foo/A")
attr(B, "scale") <- "liter"
B
attr(B)
attributes(B)
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
h5createGroup(filename2,"foo")
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
rm(list=ls())
cat("\014")
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
rm(list=ls())
cat("\014")
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
h5read(filename2,"foo/S")
filename2 <- "exampleHDF5_2.h5"
if (!file.exists("filename2")) {
h5createFile(filename2)
}
filename2 <- "exampleHDF5_2.h5"
if (!file.exists("filename2")) {
h5createFile(filename2)
}
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(4,8),storage.mode="integer",chunk=c(5,1),level=7)
h5read(filename2,"foo/S")
?h5createDataset
filename2 <- "exampleHDF5_2.h5"
if (!file.exists("filename2")) {
h5createFile(filename2)
}
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(4,8),storage.mode="integer",chunk=c(4,1),level=7)
h5read(filename2,"foo/S")
h5write(matrix(1:5,nr=5,nc=1),filename,"foo/S",list(NULL,1))
h5write(matrix(1:5,nr=5,nc=1),filename2,"foo/S",list(NULL,1))
h5write(matrix(1:5,nr=5,nc=1),file=filename2,name="foo/S",indiex=list(NULL,1))
h5write(matrix(1:5,nr=4,nc=1),file=filename2,name="foo/S",indiex=list(NULL,1))
h5write(matrix(1:4,nr=4,nc=1),file=filename2,name="foo/S",indiex=list(NULL,1))
h5write(matrix(1:4,nr=4,nc=1),file=filename2,name="foo/S",index=list(NULL,1))
h5read(filename2,"foo/S")
?h5write
list(1,2:8)
h5write(matrix(2:8,nr=1,nc=7),file=filename2,name="foo/S",index=list(1,2:8))
h5read(filename2,"foo/S")
h5write(matrix(1:8,nr=2,nc=4),file=filename2,name="foo/S",index=list(3:4,5:8))
h5read(filename2,"foo/S")
h5read(filename,"foo/S",index=list(3:4,1:2))
h5read(filename2,"foo/S",index=list(3:4,1:2))
h5read(filename2,"foo/S",index=list(3:4,c(2,4,6)))
q()
getwd()
q()
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/usingRhdf5.R', echo=TRUE)
filename <- "exampleHDF5.h5"
file.remove(filename)
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/usingRhdf5.R', echo=TRUE)
q()
18.02*500
7.21/9010
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today(),"character"),"股息红利","133.00","NA")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
source('~/Google Drive/HusbandStock/analysis.R', echo=TRUE)
q()
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/usingRhdf5.R', echo=TRUE)
h5createDataset(filename,"foo/H",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
h5read(filename,"foo/H")
h5write(matrix(1:5,nr=5,nc=1),file=filename,name="foo/H",start=c(1,1))
h5read(filename,"foo/H")
h5write(matrix(1:5,nr=5,nc=1),file=filename,name="foo/H",start=c(4,1))
h5write(matrix(1:5,nr=5,nc=1),file=filename,name="foo/H",start=c(1,4))
h5read(filename,"foo/H")
h5write(6:10,file=filename,name="foo/H",start=c(1,2),count=c(1,5))
h5read(filename,"foo/H")
h5write(6:10,file=filename,name="foo/H",start=c(1,2),count=c(1,4))
h5write(matrix(6:10,nr=1,nc=5),file=filename,name="foo/H",start=c(1,2))
h5read(filename,"foo/H")
matrix(11:40,nr=5,nc=6)
matrix(11:40,nr=5,nc=5)
h5write(matrix(6:10,nr=5,nc=1),file=filename,name="foo/H",start=c(1,2),count=c(1,5))
h5read(filename,"foo/H")
h5write(matrix(11:40,nr=5,nc=6),file=filename,name="foo/H",start=c(1,3))
h5read(filename,"foo/H")
h5write(matrix(120:123,nr=2,nc=2),file=filename,name="foo/H",start=c(4,1))
h5read(filename,"foo/H")
h5write(matrix(151:154,nr=2,nc=2),file=filename,name="foo/H",start=c(2,3),
stride=c(3,1))
h5read(filename,"foo/H")
h5write(matrix(151:154,nr=2,nc=2),file=filename,name="foo/H",start=c(2,3),
stride=c(3,2))
h5read(filename,"foo/H")
h5read(filename,"foo/H",start=c(2,2),count=c(2,2))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3), stride=c(1,2))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3), stride=c(1,2))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3), stride=c(1,2),block=c(1,2))
h5dump(filename)
h5ls(filename)
h5save(W,Y,Z,file=filename)
W <- 1:7
Y <- 1:18
Z <- seq(0,1,0.1)
h5save(W,Y,Z,file=filename)
h5ls(filename)
h5ls(filename,all=TRUE)
rm(list=ls())
cat("\014")
h5dump(filename)
filename <- "exampleHDF5.h5"
h5dump(filename)
D <- h5dump(filename)
D
D$W
D$Y
D$Z
D$foo
D$foo$H
toLatex(sessionInfo())
q()
install.packages("RMySQL")
?dbConnect
library(RMySQL)
install.packages("RMySQL")
install.packages('RMySQL', type='source')
library(RMySQL)
q()
install.packages('RMySQL', type='source')
library(RMySQL)
?dbConnect
q()
Sys.setenv(PKG_CPPFLAGS = "-I/usr/local/include/mysql")
Sys.setenv(PKG_LIBS = "-L/usr/local/lib -lmysqlclient")
install.packages("RMySQL", type = "source")
library(RMySQL)
rm(list=ls())
cat("\014")
ucscDB <- dbConnect(MySQL(),user="genome",host="genome-mysql.cse.ucsc.edu")
class(ucscDB)
result <- dbGetQuery(ucscDb,"show databases;");
result <- dbGetQuery(ucscDb,"show databases");
result <- dbGetQuery(ucscDB,"show databases;");
result
dbDisconnect(ucscDB)
rm(list=ls())
cat("\014")
hg19 <- dbConnect(MySQL(),user="genome",db="hg19",host="genome-mysql.cse.ucsc.edu")
allTables <- dbListTables(hg19)
View(allTables)
Length(allTables)
length(allTables)
allTables[1:5]
dbListFields(hg19,tablename)
tablename <- "affyU133Plus2"
dbListFields(hg19,tablename)
dbGetQuery(hg19,sprintf("select count(*) from %s", tablename))
affyData <- dbReadTable(hg19,tablename)
nrow(affyData)
ncol(affyData)
query <- dbSendQuery(hg19,
sprintf("select count(*) from %s %s", tablename,
"where misMatches between 1 and 3"))
affyMis <- fetch(query);
View(affyMis)
View(affyMis)
query <- dbSendQuery(hg19,
sprintf("select count(*) from %s %s", tablename,
"where misMatches between 1 and 3"),sep="")
sprintf("select count(*) from %s %s", tablename,
"where misMatches between 1 and 3"))
sprintf("select count(*) from %s %s", tablename,
"where misMatches between 1 and 3")
query <- dbSendQuery(hg19,
sprintf("select * from %s %s", tablename,
"where misMatches between 1 and 3"))
affyMis <- fetch(query);
View(affyMis)
quantile(affyMis)
quantile(affyMis$misMatches)
?quantile
quantile(x <- rnorm(1001))
affyMisSmall <- fetch(query,n=10);
dbClearResult(query)
dbDisconnect(hg19)
q()
con = url("http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en")
class(con)
htmlCode = readLines(con)
con <- url("http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en&oi=ao")
htmlCode = readLines(con)
close(con)
htmlCode
library(XML)
url <- "http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en&oi=ao"
html <- htmlTreeParse(url,useInternalModes=TRUE)
html <- htmlTreeParse(url,useInternalNodes=TRUE)
html
xpathSApply(html,"//title",xmlValue)
xpathSApply(html,"//td[@id='col-citedby']",xmlValue)
install.packages("httr")
library(httr)
urlGET <- GET(url)
?GET
content <- content(urlGET,as="text")
contentWeb <- content(urlGET,as="text")
rm(list=ls())
cat("\014")
library(httr)
urlGET <- GET(url)
contentWeb <- content(urlGET,as="text")
url <- "http://scholar.google.com/citations?user=HI-I6C0AAAAJ&hl=en&oi=ao"
library(httr)
urlGET <- GET(url)
contentWeb <- content(urlGET,as="text")
contentWeb
?htmlParse
parsedContent <- htmlParse(contentWeb,asText=TRUE)
parsedContent
xpathSApply(parsedContent,"//title",xmlValue)
pg1 <- GET("http://httpbin.org/basic-auth/user/passwd")
pg1
pg1 <- GET("http://httpbin.org/basic-auth/user/passwd",
authenticate("user","passwd"))
pg1
pg_mathwork <- GET("https://softsrv.uni-rostock.de/distsoft/mathworks/",
authenticate("user","passwd"))
pg_mathwork
pg_mathwork <- GET("https://softsrv.uni-rostock.de/distsoft/mathworks/",
authenticate("yz004","lynette!!bree"))
pg_mathwork
contentMathwork <- content(pg_mathwork,as="text")
contentMathwork
parsedMathwork <- htmlParse(contentMathwork,asText=TRUE)
parsedMathwork
xpathSApply(parsedMathwork,"//title",xmlValue)
names(pg_mathwork)
mathwork <- handle("https://softsrv.uni-rostock.de/distsoft/mathworks/")
mathwork
pg <- GET(handle=mathwork,path="/")
pg
?handle
mathwork <- handle("https://softsrv.uni-rostock.de/distsoft/mathworks/")
pg <- GET(handle=mathwork)
pg
pg <- GET(handle=mathwork,authenticate("yz004","lynette!!bree"))
mathwork <- handle("https://softsrv.uni-rostock.de/distsoft/mathworks/")
mathwork
pg <- GET(handle=mathwork,
authenticate("yz004","lynette!!bree"))
pg <- GET("http://httpbin.org/basic-auth/user/passwd",
authenticate("user","passwd"))
content <- content(pg,as="text")
parsed <- htmlParse(content,asText=TRUE)
xpathSApply(parsed,"//title",xmlValue)
names(pg)
content
parsed
filepath <- "Data/1s_SNc_perf_patch.abf"
install.packages("abf2")
library(abf2)
rm(list=ls())
cat("\014")
library(abf2)
filepath <- "Data/1s_SNc_perf_patch.abf"
content_abf <- abfload(filepath)
getwd()
filepath <- "/Data/1s_SNc_perf_patch.abf"
library(abf2)
content_abf <- abfload(filepath)
filepath <- "1s_SNc_perf_patch.abf"
content_abf <- abfload(filepath)
q()
urlQ2 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(fileURL_csv,destfile="./Quiz2/Q2.csv",method="curl")
urlQ2 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(urlQ2,destfile="./Quiz2/Q2.csv",method="curl")
rm(list=ls())
cat("\014")
dataQ2 <- read.table("./Quiz2/Q2.csv",sep=",",header=TRUE)
name(dataQ2)
colnames(dataQ2)
install.packages("sqldf")
sqldf("select pwgtp1 from acs where AGEP < 50")
library("sqldf")
sqldf("select pwgtp1 from acs where AGEP < 50")
sqldf("select pwgtp1 from dataQ2 where AGEP < 50")
resultQ2 <- sqldf("select pwgtp1 from dataQ2 where AGEP < 50")
View(resultQ2)
resultQ3 <- sqldf("select unique AGEP from dataQ2")
resultQ3 <- sqldf("select distinct AGEP from dataQ2")
View(resultQ3)
resultQ3r <- unique(dataQ2$AGEP)
urlQ4 <- "http://biostat.jhsph.edu/~jleek/contact.html"
conQ4 <- url(urlQ4)
conQ4
htmlCode = readLines(conQ4)
htmlCode
length(htmlCode)
htmlCode[1]
htmlCode[0]
htmlCode[1]
nchar(htmlCode[1])
?nchar
?lapply
htmlCode[1,2,3,4]
htmlCode[c(1,2,3,4)]
sapply(htmlCode[iLines],nchar)
iLines <- c(10,20,30,100)
sapply(htmlCode[iLines],nchar)
lapply(htmlCode[iLines],nchar)
vapply(htmlCode[iLines],nchar)
lapply(htmlCode[iLines],nchar)
sapply(htmlCode[iLines],nchar)
?read.table
dataQ5 <- read.table("./Quiz2/Q5.for",sep="     ",skip=3,header=TRUE)
dataQ5 <- read.table("./Quiz2/Q5.for",sep="     ",skip=3,header=TRUE)
dataQ5 <- read.table("./Quiz2/Q5.for",sep=" ",skip=3,header=TRUE)
?read.fwf
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=3,header=TRUE)
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=3,widths=c(5,5,5,5),header=TRUE)
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=4,widths=c(12, 7,4, 9,4, 9,4, 9,4))
dataQ5
View(dataQ5)
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=3,
widths=c(12, 7,4, 9,4, 9,4, 9,4),
header=TRUE)
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=4,
widths=c(12, 7,4, 9,4, 9,4, 9,4),
header=TRUE)
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=3,
widths=c(12, 7,4, 9,4, 9,4, 9,4))
View(dataQ5)
dataQ5 <- read.fwf("./Quiz2/Q5.for",skip=3,header=TRUE,
widths=c(12, 7,4, 9,4, 9,4, 9,4))
dataQ5 <- read.fwf(
file=url("http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for"),
skip=4,
widths=c(12, 7,4, 9,4, 9,4, 9,4))
View(dataQ5)
data[,4]
length(dataQ5[,4])
sapply(dataQ5[,4],sum)
sum(dataQ5[,4])
sum(dataQ5[,8]) + sum(dataQ5[,9])
dataQ5[,5]
sum(dataQ5[,5])
sum(dataQ5[,4])
sum(dataQ5[,4])
sum(dataQ5[,5])
sum(dataQ5[,3])
sum(dataQ5[,4])
sum(dataQ5[,8])
sum(dataQ5[,1])
sum(dataQ5[,2])
sum(dataQ5[,4])
sum(dataQ5[,6])
sum(dataQ5[,8])
sum(dataQ5[,4]) + sum(dataQ5[,5])
q()
