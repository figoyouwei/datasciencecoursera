if (!file.exists('Data')) {
dir.create('Data')
}
unlink("Data", recursive = TRUE)
if (!file.exists("Data")) {
dir.create("Data")
}
unlink("Data", recursive = TRUE) #remove directory
if (!file.exists("Data")) {
dir.create("Data")
}
fileURL <- https://data.baltimorecity.gov/api/views/dz54-2aru/rows.csv?accessType=DOWNLOAD
download.file(fileURL,destfile="./Data/cameras.csv",method="curl")
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.csv?
accessType=DOWNLOAD"
download.file(fileURL,destfile="./Data/cameras.csv",method="curl")
unlink("./Data", recursive = TRUE) #remove directory
if (!file.exists("./Data")) {
dir.create("./Data")
}
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.csv?
accessType=DOWNLOAD"
download.file(fileURL,destfile="./Data/cameras.csv",method="curl")
list.files("./Data")
dateDownloaded <- date()
q()
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/DownloadingFiles.R', echo=TRUE)
if (!file.exists("./Data")) {
dir.create("./Data")
}
fileURL <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.csv?
accessType=DOWNLOAD"
download.file(fileURL,destfile="./Data/cameras.csv",method="curl")
list.files("./Data")
dateDownloaded <- date()
getwd()
cameraData <- read.table("./Data/cameras.csv")
cameraData <- read.table("./Data/cameras.csv",sep=",",header=TRUE)
head(cameraData)
View(cameraData)
?read.table
q()
q()
687.79*5
q()
q()
fileURL_xlsx <- "https://data.baltimorecity.gov/api/views/dz54-2aru/rows.xlsx?
accessType=DOWNLOAD"
download.file(fileURL_xlsx,destfile="./Data/cameras.xlsx",method="curl")
library(xlsx)
?read.xlsx
library(xlsx)
cameraData <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,header=TRUE)
View(cameraData)
cameraData <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,header=TRUE,
rowIndex=rows,colIndex=cols)
rows <- 1:4
cols <- 2:3
cameraData <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,header=TRUE,
rowIndex=rows,colIndex=cols)
View(cameraData)
cameraData <- read.table("./Data/cameras.csv",sep=",",header=TRUE)
rows <- 1:4
cols <- 2:3
cameraDataSub <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,header=TRUE,
rowIndex=rows,colIndex=cols)
View(cameraData)
library(xlsx)
rows <- 2:5
cols <- 2:3
cameraDataSub <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,header=TRUE,
rowIndex=rows,colIndex=cols)
View(cameraDataSub)
rows <- 1:5
cols <- 2:3
View(cameraDataSub)
cameraDataSub <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,
rowIndex=rows,colIndex=cols)
View(cameraDataSub)
library(xlsx)
rows <- 1:5 # row 1 is the header.
cols <- 1:2
cameraDataSub <- read.xlsx("./Data/cameras.xlsx",sheetIndex=1,
rowIndex=rows,colIndex=cols)
View(cameraDataSub)
library(XML)
fileURL_XML <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParser(fileURL_XML,useInternal=TRUE)
rootNode <- xmlRoot(doc)
install.packages("XML")
library(XML)
fileURL_XML <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParser(fileURL_XML,useInternal=TRUE)
fileURL_XML <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileURL_XML,useInternal=TRUE)
fileURL_XML <- "http://www.w3schools.com/xml/simple.xml"
doc <- xmlTreeParse(fileURL_XML,useInternal=TRUE)
rootNode <- xmlRoot(doc)
xmlNames(rootNode)
xmlName(rootNode)
names(rootNode)
?names
rootNode
doc
?xmlRoot
doc <- xmlTreeParse(fileURL_XML,useInternal=TRUE)
content <- xmlRoot(doc)
xmlName(content)
?xmlName
names(content_xml)
names(content)
content[[1]]
View(content)
content
content[[1]]
content[[1]][[1]]
content[[1]][[0]]
content[[1]][[1]]
?xmlSApply
xmlSApply(content,"//name",xmlValue)
xpathSApply(content,"//name",xmlValue)
?xpathSApply
xpathSApply(content,"//price",xmlValue)
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/Husband_Trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"保利地产 (600048)","70.41","当天抛压很大")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
?sapply
?lapply
library(XML)
fileURL_HTML <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
doc <- htmlTreeParse(fileURL_XML,useInternal=TRUE)
doc <- htmlTreeParse(fileURL_HTML,useInternal=TRUE)
doc
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
teams
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
install.packages("jsonlite")
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
install.packages('httr')
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
?names
jsonData
names(jsonData)
cat(jsonData)
library(datasets)
iris <- datasets("iris")
data(iris)
?iris
View(iris)
rm(list=ls())
cat("\014")
library(datasets)
View(iris)
iris
data(iris)
View(iris)
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
names(jsonData)
library(datasets)
data(iris)
myjson <- toJSON(iris,pretty=TRUE)
cat(myjson)
myjson
?cat
cat("my printer")
cat("my printer"," doesn't work anymore")
cat("my printer","doesn't work anymore")
iris2 <- fromJSON(myjson)
head(iris2)
q()
fileURL_csv <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv"
download.file(fileURL_csv,destfile="./Data/Quiz1_Q1.csv",method="curl")
data_Quiz1_Q1 <- read.table("./Data/Quiz1_Q1.csv",sep=",",header=TRUE)
View(data_Quiz1_Q1)
data_Quiz_Q1$Property
data_Quiz1_Q1$Property
data_Quiz1_Q1$properties
fileURL_pdf <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FPUMSDataDict06.pdf"
download.file(fileURL_pdf,destfile="./Data/Quiz1_Q1.pdf",method="curl")
View(data_Quiz1_Q1)
data_Quiz1_Q1$VAL
min(data_Quiz1_Q1$VAL)
min(data_Quiz1_Q1$VAL,na.rm=TRUE)
max(data_Quiz1_Q1$VAL,na.rm=TRUE)
indices <- data_Quiz_Q1$VAL >= 24
indices <- data_Quiz1_Q1$VAL >= 24
indices
sum(indices, na.rm=TRUE)
data_Quiz1_Q1$FES
rm(list=ls())
cat("\014")
fileURL_xlsx <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx"
download.file(fileURL_xlsx,destfile="./Data/Quiz1_Q2.xlsx",method="curl")
library(xlsx)
rows <- 1:5 # row 1 is the header.
cols <- 1:2
data_Q2 <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,rowIndex=rows,colIndex=cols,header=TRUE)
View(data_Q2)
data_Q2_Full <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,header=TRUE)
View(data_Q2_Full)
View(data_Q2_Full)
?read.xlsx
rows <- 18:23
cols <- 7:15
rows <- 18:23
cols <- 7:15
data_Q2 <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,
rowIndex=rows,colIndex=cols,header=TRUE)
View(data_Q2)
data_Q2_Full <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,header=TRUE)
View(data_Q2_Full)
?read.xlsx
View(data_Q2)
sum(dat$Zip*dat$Ext,na.rm=TRUE)
sum(data_Q2$Zip*dat$Ext,na.rm=TRUE)
sum(data_Q2$Zip*data_Q2$Ext,na.rm=TRUE)
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
download.file(fileURL_Q4,destfile="./Data/Quiz1_Q4.xml",method="curl")
rm(list=ls())
cat("\014")
library(XML)
doc <- xmlTreeParse("./Data/Quiz1_Q4.xml",useInternal=TRUE)
content <- xmlRoot(doc)
library(XML)
doc <- xmlTreeParse(fileURL_Q4,useInternal=TRUE)
content <- xmlRoot(doc)
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
library(XML)
doc <- xmlTreeParse(fileURL_Q4,useInternal=TRUE)
content <- xmlRoot(doc)
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
library(XML)
doc <- xmlTreeParse(fileURL_Q4,useInternal=TRUE)
?xmlTreeParse
content
rm(list=ls())
cat("\014")
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
download.file(fileURL_Q4,destfile="./Data/Quiz1_Q4.xml",method="curl")
library(XML)
doc <- xmlTreeParse("./Data/Quiz1_Q4.xml",useInternal=TRUE)
content <- xmlRoot(doc)
content
zipcodes <- xpathSApply(content,"//zipcode",xmlValue)
zipcodes
sum(zipcodes == 21231)
fileURL_Q5 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(fileURL_Q5,destfile="./Data/Quiz1_Q5.csv",method="curl")
?fread
??fread
library(data.table)
install.packages("data.table")
library(data.table)
rm(list=ls())
cat("\014")
library(data.table)
fileURL_Q5 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(fileURL_Q5,destfile="./Data/Quiz1_Q5.csv",method="curl")
DT <- fread("./Data/Quiz1_Q5.csv")
View(DT)
DT[,mean(pwgtp15),by=SEX]
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
ptm <- proc.time()
rowMeans(DT)[DT$SEX==1]; rowMeans(DT)[DT$SEX==2]
proc.time() - ptm
ptm <- proc.time()
tapply(DT$pwgtp15,DT$SEX,mean)
proc.time() - ptm
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
ptm <- proc.time()
tapply(DT$pwgtp15,DT$SEX,mean)
proc.time() - ptm
?tapply
ptm <- proc.time()
sapply(split(DT$pwgtp15,DT$SEX),mean)
proc.time() - ptm
ptm <- proc.time()
sapply(split(DT$pwgtp15,DT$SEX),mean)
proc.time() - ptm
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
class(DT)
View(DT)
DT$SEX
tapply(DT$pwgtp15,mean)
tapply(DT$pwgtp15,DT$SEX,mean)
tapply
?tapply
?sapply
q()
