carMelt
View(dataMelt)
tapply(dataMelt$value,dataMelt$variable,mean)
tapply(dataMelt$value,list(dataMelt$variable,dataMelt$ActivityID),mean)
a <- tapply(dataMelt$value,list(dataMelt$variable,dataMelt$ActivityID),mean)
a
?dcast
a <- tapply(dataMelt$value,list(dataMelt$variable,dataMelt$ActivityID,dataMelt$SubjectID),mean)
a
q()
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/CourseProject/run_analysis.R', echo=TRUE)
test <- data.frame(x=c(26,21,20),y=c(34,29,28))
as.vector(as.matrix(test))
test
a
a <- tapply(extracted[,"tBodyAcc-mean()-X"],
list(extracted$SubjectID,extracted$ActivityID),
mean)
a
as.vector(as.matrix(a))
View(a)
View(as.vector(as.matrix(a)))
colnames(extracted)
collabels <- colnames(extracted)
seq(along.with=collabels)
seq(from=3,along.with=collabels)
seq(from=3,to=81,by=1)
?rep
rep(1:4,2
)
as.vector(t(a))
a
rep(1,6)
rep(n,6)
rep("n",6)
rep("n",seq(1,5,1))
?rep
rep(1:5, each=5)
rep(1:30, each=6)
View(activity_labels)
activity_labels
activity_labels[,2]
as.character(activity_labels[,2])
dfNo2 <- data.frame(SubjectID=rep(1:30, each=6),
SubjectID=rep(as.character(activity_labels[,2]), 30))
dfNo2
a <- tapply(extracted[,"tBodyAcc-mean()-X"],
list(extracted$SubjectID,extracted$ActivityID),
mean)
b <- as.vector(t(a))
dfNo2 <- cbind(dfNo2,b)
dfNo2
dfNo2 <- data.frame(SubjectID=rep(1:30, each=6),
ActivityID=rep(as.character(activity_labels[,2]), 30))
colnames(extracted)
colnames(extracted)[1]
colnames(extracted)[3] <- "something"
colnames(extracted)[3]
dfNo2 <- data.frame(SubjectID=rep(1:30, each=6),
ActivityID=rep(as.character(activity_labels[,2]), 30))
collabels <- colnames(extracted)
for (i in seq(from=3,to=81,by=1)) {
temp <- tapply(extracted[,collabels[,i]],
list(extracted$SubjectID,extracted$ActivityID),
mean)
dfNo2 <- cbind(dfNo2,as.vector(t(temp)))
colnames(dfNo2)[i] <- collabels[,i]
}
colnames(dfNo2)
for (i in seq(from=3,to=81,by=1)) {
print(i)
temp <- tapply(extracted[,collabels[,i]],
list(extracted$SubjectID,extracted$ActivityID),
mean)
dfNo2 <- cbind(dfNo2,as.vector(t(temp)))
colnames(dfNo2)[i] <- collabels[,i]
}
collabels[,3]
collabels
collabels[3]
extracted <- dataSET[,c("SubjectID","ActivityID",cols)]
dfNo2 <- data.frame(SubjectID=rep(1:30, each=6),
ActivityID=rep(as.character(activity_labels[,2]), 30))
collabels <- colnames(extracted)
for (i in seq(from=3,to=81,by=1)) {
print(i)
temp <- tapply(extracted[,collabels[i]],
list(extracted$SubjectID,extracted$ActivityID),
mean)
dfNo2 <- cbind(dfNo2,as.vector(t(temp)))
colnames(dfNo2)[i] <- collabels[,i]
}
collabels[3]
for (i in seq(from=3,to=81,by=1)) {
print(i)
temp <- tapply(extracted[,collabels[i]],
list(extracted$SubjectID,extracted$ActivityID),
mean)
dfNo2 <- cbind(dfNo2,as.vector(t(temp)))
colnames(dfNo2)[i] <- collabels[i]
}
dfNo2
View(dfNo2)
seq(from=3,to=81,by=1)
dfNo2 <- data.frame(SubjectID=rep(1:30, each=6),
ActivityID=rep(as.character(activity_labels[,2]), 30))
collabels <- colnames(extracted)
for (i in seq(from=3,to=81,by=1)) {
print(i)
temp <- tapply(extracted[,collabels[i]],
list(extracted$SubjectID,extracted$ActivityID),
mean)
dfNo2 <- cbind(dfNo2,as.vector(t(temp)))
colnames(dfNo2)[i] <- collabels[i]
}
View(dfNo2)
write.table(dfNo2,
"/Users/youweizheng/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/CourseProject/dataset2_meanstd.csv",
sep=",",row.names=FALSE)
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/CourseProject/run_analysis.R', echo=TRUE)
q()
1066394.96+135259.04
## ----- clear workspace and console ...
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"闽东电力 (000993)","625.67","冲高无穷成本线回落")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"山西证券 (002500)","1745.92","老妈硬是要抛掉说大盘成交量放得过大")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today(),"character"),"股息红利","2413.00","上港集团")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"广汇能源 (600256)","4516.81","碰到了无穷成本线")
dat_tr_new <- rbind(dat_tr,newtrade)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"平庄能源 (000780)","-665.37","短期有利空消息")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"广汇能源 (600256)","4516.81","碰到了无穷成本线")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"股息红利税补缴","38.50","山西证券")
dat_tr_new <- rbind(dat_tr,newtrade)
library(lubridate)
newtrade <- c(as(today(),"character"),"股息红利税补缴","38.50","山西证券")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
q()
varNames <- c("address","direction","street","crossStreet","intersection","Location.1")
tolower(varNames)
?strsplit
strsplit(varNames,split="\\.")
reviews <- c("id","solution_id","reviewer_id","start","stop","time_left","accept")
?sub
sub(pattern="_",replacement=".",reviews)
testName <- "this_is_a_test"
sub(pattern="_",replacement=".",testName)
gsub(pattern="_",replacement=".",testName)
intersections <- c("Alma","Suck","Shit","Alma","Alma","Rock")
grep(pattern="Alma",intersections)
grepl(pattern="Alma",intersections)
table(grepl(pattern="Alma",intersections))
install.packages("stringr")
?nchar
nchar("Youwei Zheng")
substr(myname,1,7)
myname <- "Youwei Zheng"
substr(myname,1,7)
nchar(myname)
substr(myname,8,12)
grep(pattern=" ",myname)
grepl(pattern=" ",myname)
?sub
gregexpr(pattern=" ",myname)
slist <- gregexpr(pattern=" ",myname)
slist[[1]]
slist[[1]][1]
pos <- gregexpr(pattern=" ",myname)[[1]][1]
pos
library(stringr)
myname <- "Youwei Zheng"
nchar(myname)
pos <- gregexpr(pattern=" ",myname)[[1]][1]
substr(myname,1,pos-1)
substr(myname,pos+1,12)
?paste0
paste("Youwei","Zheng",sep=" ")
paste("Youwei","Zheng",myname,sep=" ")
rightnow <- date()
rightnow
class(rightnow)
rm(list=ls())
d1 <- date()
d2 <- Sys.Date()
d2
class(d2)
format(d2,"%a %b %d %m %Y")
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
View(dat_tr)
dat_tr[18,"Stock"]
gsub(" ","",dat_tr[18,"Stock"])
dat_tr[18,"Stock"] <- gsub(" ","",dat_tr[18,"Stock"])
View(dat_tr)
dat_tr$Date
ndate3 <- as.Date("2014-07-29", "%Y-%m-%d"); ndate3
q()
buy <- 40882.68+41032.80+41182.92
sell <- 8273.38 + 33133.47 + 82933.60
sell - buy
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today(),"character"),"信诚300B (150052)","1242","老妈抛的")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
dat_tr$Profit <- as.numeric(dat_tr$Profit)
total_tr_profit <- sum(as.numeric(dat_tr$Profit),na.rm=TRUE)
library(lubridate)
library(plyr)
dat_tr$byMonth <- floor_date(dat_tr$Date, "month")
monthly_tr <- ddply(dat_tr, "byMonth", summarise, monthly = sum(Profit))
source('~/Google Drive/HusbandStock/analysis.R', echo=TRUE)
q()
rm(list=ls())
cat("\014")
dataQ1 <- read.table("./Quiz4/Q1.csv",sep=",",header=TRUE)
View(dataQ1)
varNames <- names(dataQ1)
strsplit(varNames)
q()
rm(list=ls())
cat("\014")
dataQ1 <- read.table("./Quiz4/Q1.csv",sep=",",header=TRUE)
varNames <- names(dataQ1)
?strsplit
strsplit("wgtp",varNames)
apply(varNames,strsplit("wgtp"))
?apply
apply(varNames,"wgtp",strsplit)
tes<-c("1.abc","2.di","3.lik")
dat<-c(5,3,2)
h<-data.frame(tes,dat)
h
sapply(strsplit(as.character(h$tes), "\\."), "[[", 2)
sapply(strsplit(as.character(h$tes), "\\."), "", 1)
sapply(strsplit(varNames, "wgtp"), "", 1)
sapply(strsplit(as.character(h$tes), "\\."), "[[", 1)
sapply(strsplit(varNames, "wgtp"), "[[", 1)
sapply(strsplit(varNames, "wgtp"), "[[", 2)
sapply(strsplit(varNames, "wgtp"), "[[")
sapply(strsplit(varNames, "wgtp"), "[[",1)
View(dataQ1)
dataQ2 <- read.table("./Quiz4/Q2.csv",sep=",",header=TRUE)
dataQ2 <- read.csv("./Quiz4/Q2.csv",head=TRUE)
rm(list=ls())
cat("\014")
dataQ2 <- read.csv("./Quiz4/Q2.csv",head=TRUE)
View(dataQ2)
countriesGDP <- read.csv("./Quiz2/countriesGDP.csv",head=TRUE)
countriesGDP <- read.csv("./Quiz4/countriesGDP.csv",head=TRUE)
library(data.table)
setnames(countriesGDP, "X", "ShortCode")
setnames(countriesGDP, "Gross.domestic.product.2012", "GDP.Ranking")
setnames(countriesGDP, "X.2", "Long.Name")
setnames(countriesGDP, "X.3", "Millions.Of.US.Dollar")
GDP_Rs <- countriesGDP[-c(1:4,195:330),-which(names(countriesGDP) %in% c("X.1","X.4","X.5","X.6","X.7","X.8"))]
View(GDP_Rs)
View(GDP_Rs)
class(GDP_Rs$Millions.Of.US.Dollar)
GDP_Rs$Millions.Of.US.Dollar <- as.numeric(GDP_Rs$Millions.Of.US.Dollar)
class(GDP_Rs$Millions.Of.US.Dollar)
mean(GDP_Rs$Millions.Of.US.Dollar)
View(GDP_Rs)
GDP_Rs$Millions.Of.US.Dollar <- as.character(GDP_Rs$Millions.Of.US.Dollar)
View(GDP_Rs)
# ----- Question 2:
## load data
countriesGDP <- read.csv("./Quiz4/countriesGDP.csv",head=TRUE)
## change variable names
library(data.table)
setnames(countriesGDP, "X", "ShortCode")
setnames(countriesGDP, "Gross.domestic.product.2012", "GDP.Ranking")
setnames(countriesGDP, "X.2", "Long.Name")
setnames(countriesGDP, "X.3", "Millions.Of.US.Dollar")
## drop non-valuable rows and cols
GDP_Rs <- countriesGDP[-c(1:4,195:330),-which(names(countriesGDP) %in% c("X.1","X.4","X.5","X.6","X.7","X.8"))]
GDP_Rs$Millions.Of.US.Dollar <- as.character(GDP_Rs$Millions.Of.US.Dollar)
View(GDP_Rs)
GDP_Rs$Millions.Of.US.Dollar <- as.numeric(GDP_Rs$Millions.Of.US.Dollar)
View(GDP_Rs)
# ----- Question 2:
## load data
countriesGDP <- read.csv("./Quiz4/countriesGDP.csv",head=TRUE)
## change variable names
library(data.table)
setnames(countriesGDP, "X", "ShortCode")
setnames(countriesGDP, "Gross.domestic.product.2012", "GDP.Ranking")
setnames(countriesGDP, "X.2", "Long.Name")
setnames(countriesGDP, "X.3", "Millions.Of.US.Dollar")
## drop non-valuable rows and cols
GDP_Rs <- countriesGDP[-c(1:4,195:330),-which(names(countriesGDP) %in% c("X.1","X.4","X.5","X.6","X.7","X.8"))]
## remove comma in the factor
GDP_Rs$Millions.Of.US.Dollar <- as.character(GDP_Rs$Millions.Of.US.Dollar)
gsub(pattern=",",replacement="",GDP_Rs$Millions.Of.US.Dollar)
gsub(pattern=" ",replacement="",GDP_Rs$Millions.Of.US.Dollar)
GDP_Rs$Millions.Of.US.Dollar <- gsub(pattern=",",replacement="",GDP_Rs$Millions.Of.US.Dollar)
GDP_Rs$Millions.Of.US.Dollar <- gsub(pattern=" ",replacement="",GDP_Rs$Millions.Of.US.Dollar)
View(GDP_Rs)
mean(GDP_Rs$Millions.Of.US.Dollar)
GDP_Rs$Millions.Of.US.Dollar <- as.numeric(GDP_Rs$Millions.Of.US.Dollar)
mean(GDP_Rs$Millions.Of.US.Dollar)
print(paste("Answer 2 is: ", mean(GDP_Rs$Millions.Of.US.Dollar)))
print(paste("Answer 2 is: ", mean(GDP_Rs$Millions.Of.US.Dollar,sep="")))
print(paste("Answer 2 is:", mean(GDP_Rs$Millions.Of.US.Dollar,sep="")))
?paste
print(paste("Answer 2 is:",mean(GDP_Rs$Millions.Of.US.Dollar,sep="")))
View(GDP_Rs)
grep("^United",GDP_Rs$Long.Name)
len(grep("^United",GDP_Rs$Long.Name))
length(grep("^United",GDP_Rs$Long.Name))
print(paste("Answer 3 is:",length(grep("^United",GDP_Rs$Long.Name))))
countriesEDU <- read.csv("./Quiz4/countriesEDU.csv",head=TRUE)
countriesEDU <- read.csv("./Quiz4/countriesEDU.csv",head=TRUE)
View(countriesEDU)
names(countriesEDU)
countriesEDU$Special.Notes
grep(pattern="June",countriesEDU$Special.Notes)
length(grep(pattern="June",countriesEDU$Special.Notes))
length(grep(pattern="Fiscal",countriesEDU$Special.Notes))
length(grep(pattern="Fiscal & June",countriesEDU$Special.Notes))
countriesEDU$Special.Notes[234]
countriesEDU$Special.Notes[234][1]
countriesEDU <- read.csv("./Quiz4/countriesEDU.csv",head=TRUE)
countriesEDU$Special.Notes <- as.character(countriesEDU$Special.Notes)
grep(pattern="Fiscal",countriesEDU$Special.Notes)
p1 <- grep(pattern="Fiscal",countriesEDU$Special.Notes)
countriesEDU$Special.Notes[p1]
fiscal <- countriesEDU$Special.Notes[p1]
june <- grep(pattern="June",fiscal)
print(paste("Answer 4 is:",length(june)))
rm(list=ls())
cat("\014")
library(quantmod)
amzn = getSymbols("AMZN",auto.assign=FALSE)
sampleTimes = index(amzn)
install.packages("quantmod")
rm(list=ls())
cat("\014")
library(quantmod)
amzn = getSymbols("AMZN",auto.assign=FALSE)
sampleTimes = index(amzn)
View(amzn)
names(amzn)
amzn$row.names
amzn[,1]
amzn[,0]
dates <- amzn[,0]
class(dates)
dateall <- amzn[,0]
class(dateall)
dateall[1]
View(amzn)
row.names
row.names(amzn)
class(amzn)
xts
rm(list=ls())
cat("\014")
library(quantmod)
amzn = getSymbols("AMZN",auto.assign=FALSE)
sampleTimes = index(amzn)
amazon <- data.frame(date=index(amzn), coredata(amzn))
View(amazon)
dateall <- as.character(amazon$date)
dateall
as.Date(dateall, "%Y%d%B")
for (i in 1:length(dateall)){
dates[i] <- as.Date(dateall[i], "%Y%B%d")
}
?sapply
library(lubridate)
amazon$byMonth <- floor_date(dat_tr$Date, "month")
View(amazon)
amazon$byMonth <- floor_date(amazon$date, "month")
View(amazon)
class(amazon$byMonth)
year(amazon$byMonth)
"2014" %in% year(amazon$byMonth)
year(amazon$byMonth) == 2014
sum(year(amazon$byMonth) == 2012)
month(amazon$byMonth)
day(amazon$byMonth)
wday(amazon$byMonth)
sum((year(amazon$byMonth) == 2012 & wday(amazon$byMonth) == 1) )
(year(amazon$byMonth) == 2012 & wday(amazon$byMonth) == 1)
year(amazon$byMonth) == 2012
year(amazon$byMonth) == 2012
(year(amazon$byMonth) == 2012 & wday(amazon$byMonth) == 1)
sum(year(amazon$byMonth) == 2012 & wday(amazon$byMonth) == 1)
sum(year(amazon$byMonth) == 2012 && wday(amazon$byMonth) == 1)
sum(year(amazon$byMonth) == 2012)
y2012 <- year(amazon$byMonth) == 2012)
amazon$byMonth[,y2012]
y2012 <- year(amazon$byMonth) == 2012)
y2012 <- year(amazon$byMonth == 2012)
y2012 <- as.logical(year(amazon$byMonth == 2012))
y2012 <- as.logical(year(amazon$byMonth == 2012))
y2012 <- as.logical(year(amazon$byMonth) == 2012)
amazon$byMonth[,y2012]
y2012
amazon$byMonth[y2012,]
length(amazon$byMonth)
length(y2012)
class(y2012)
y2012[1]
y2012[2]
y2012[1000]
amazon$byMonth[(y2012),]
y2012 <- which(year(amazon$byMonth) == 2012)
amazon$byMonth[y2012,]
amazon$byMonth[y2012,]
amazon$byMonth[1,]
amazon$byMonth
amazon$byMonth[1,]
amazon$byMonth
amazon$byMonth[1]
amazon$byMonth[y2012]
wday(amazon$byMonth[y2012] == 1)
wday(amazon$byMonth[y2012]) == 1
sum(wday(amazon$byMonth[y2012]) == 1)
wday(amazon$byMonth[y2012])
sum(wday(amazon$byMonth[y2012]) == 2)
d <- now()
d
wday(d)
sum(year(amazon$byMonth) == 2012 & wday(amazon$byMonth) == 2)
q()
