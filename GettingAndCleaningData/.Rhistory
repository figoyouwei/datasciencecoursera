?sapply
?lapply
library(XML)
fileURL_HTML <- "http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens"
doc <- htmlTreeParse(fileURL_XML,useInternal=TRUE)
doc <- htmlTreeParse(fileURL_HTML,useInternal=TRUE)
doc
teams <- xpathSApply(doc,"//li[@class='team-name']",xmlValue)
teams
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
install.packages("jsonlite")
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
install.packages('httr')
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
?names
jsonData
names(jsonData)
cat(jsonData)
library(datasets)
iris <- datasets("iris")
data(iris)
?iris
View(iris)
rm(list=ls())
cat("\014")
library(datasets)
View(iris)
iris
data(iris)
View(iris)
library(jsonlite)
jsonData <- fromJSON("https://api.github.com/users/figoyouwei/repos")
names(jsonData)
library(datasets)
data(iris)
myjson <- toJSON(iris,pretty=TRUE)
cat(myjson)
myjson
?cat
cat("my printer")
cat("my printer"," doesn't work anymore")
cat("my printer","doesn't work anymore")
iris2 <- fromJSON(myjson)
head(iris2)
q()
fileURL_csv <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06hid.csv"
download.file(fileURL_csv,destfile="./Data/Quiz1_Q1.csv",method="curl")
data_Quiz1_Q1 <- read.table("./Data/Quiz1_Q1.csv",sep=",",header=TRUE)
View(data_Quiz1_Q1)
data_Quiz_Q1$Property
data_Quiz1_Q1$Property
data_Quiz1_Q1$properties
fileURL_pdf <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FPUMSDataDict06.pdf"
download.file(fileURL_pdf,destfile="./Data/Quiz1_Q1.pdf",method="curl")
View(data_Quiz1_Q1)
data_Quiz1_Q1$VAL
min(data_Quiz1_Q1$VAL)
min(data_Quiz1_Q1$VAL,na.rm=TRUE)
max(data_Quiz1_Q1$VAL,na.rm=TRUE)
indices <- data_Quiz_Q1$VAL >= 24
indices <- data_Quiz1_Q1$VAL >= 24
indices
sum(indices, na.rm=TRUE)
data_Quiz1_Q1$FES
rm(list=ls())
cat("\014")
fileURL_xlsx <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2FDATA.gov_NGAP.xlsx"
download.file(fileURL_xlsx,destfile="./Data/Quiz1_Q2.xlsx",method="curl")
library(xlsx)
rows <- 1:5 # row 1 is the header.
cols <- 1:2
data_Q2 <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,rowIndex=rows,colIndex=cols,header=TRUE)
View(data_Q2)
data_Q2_Full <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,header=TRUE)
View(data_Q2_Full)
View(data_Q2_Full)
?read.xlsx
rows <- 18:23
cols <- 7:15
rows <- 18:23
cols <- 7:15
data_Q2 <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,
rowIndex=rows,colIndex=cols,header=TRUE)
View(data_Q2)
data_Q2_Full <- read.xlsx("./Data/Quiz1_Q2.xlsx",sheetIndex=1,header=TRUE)
View(data_Q2_Full)
?read.xlsx
View(data_Q2)
sum(dat$Zip*dat$Ext,na.rm=TRUE)
sum(data_Q2$Zip*dat$Ext,na.rm=TRUE)
sum(data_Q2$Zip*data_Q2$Ext,na.rm=TRUE)
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
download.file(fileURL_Q4,destfile="./Data/Quiz1_Q4.xml",method="curl")
rm(list=ls())
cat("\014")
library(XML)
doc <- xmlTreeParse("./Data/Quiz1_Q4.xml",useInternal=TRUE)
content <- xmlRoot(doc)
library(XML)
doc <- xmlTreeParse(fileURL_Q4,useInternal=TRUE)
content <- xmlRoot(doc)
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
library(XML)
doc <- xmlTreeParse(fileURL_Q4,useInternal=TRUE)
content <- xmlRoot(doc)
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
library(XML)
doc <- xmlTreeParse(fileURL_Q4,useInternal=TRUE)
?xmlTreeParse
content
rm(list=ls())
cat("\014")
fileURL_Q4 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Frestaurants.xml"
download.file(fileURL_Q4,destfile="./Data/Quiz1_Q4.xml",method="curl")
library(XML)
doc <- xmlTreeParse("./Data/Quiz1_Q4.xml",useInternal=TRUE)
content <- xmlRoot(doc)
content
zipcodes <- xpathSApply(content,"//zipcode",xmlValue)
zipcodes
sum(zipcodes == 21231)
fileURL_Q5 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(fileURL_Q5,destfile="./Data/Quiz1_Q5.csv",method="curl")
?fread
??fread
library(data.table)
install.packages("data.table")
library(data.table)
rm(list=ls())
cat("\014")
library(data.table)
fileURL_Q5 <- "https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv"
download.file(fileURL_Q5,destfile="./Data/Quiz1_Q5.csv",method="curl")
DT <- fread("./Data/Quiz1_Q5.csv")
View(DT)
DT[,mean(pwgtp15),by=SEX]
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
ptm <- proc.time()
rowMeans(DT)[DT$SEX==1]; rowMeans(DT)[DT$SEX==2]
proc.time() - ptm
ptm <- proc.time()
tapply(DT$pwgtp15,DT$SEX,mean)
proc.time() - ptm
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
ptm <- proc.time()
tapply(DT$pwgtp15,DT$SEX,mean)
proc.time() - ptm
?tapply
ptm <- proc.time()
sapply(split(DT$pwgtp15,DT$SEX),mean)
proc.time() - ptm
ptm <- proc.time()
sapply(split(DT$pwgtp15,DT$SEX),mean)
proc.time() - ptm
ptm <- proc.time()
DT[,mean(pwgtp15),by=SEX]
proc.time() - ptm
class(DT)
View(DT)
DT$SEX
tapply(DT$pwgtp15,mean)
tapply(DT$pwgtp15,DT$SEX,mean)
tapply
?tapply
?sapply
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
View(dat_tr)
library(lubridate)
newtrade <- c(as(today()+days(1),"character"),"天汽模 (002510)","200.00","NA")
dat_tr_new <- rbind(dat_tr,newtrade)
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today(),"character"),"天汽模 (002510)","200.00","NA")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/Husband_Trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
dat_tr$Profit <- as.numeric(dat_tr$Profit)
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
dat_tr$Profit <- as.numeric(dat_tr$Profit)
library(lubridate)
library(plyr)
dat_tr$byMonth <- floor_date(dat_tr$Date, "month")
monthly_tr <- ddply(dat_tr, "byMonth", summarise, monthly = sum(Profit))
View(monthly_tr)
q()
293.24-97.27
q()
values <- c(44.18,26.57)
sum(values)
values <- c(44.18,26.57,32.34,475.50,82.63,22.36,129.36,38.79,15.72,1756.51,
239.72,22.51,112.46,42.25,65.65,34.96,25.48,729.13,276.76,11.90,
158.96,32.23,71.92,25.17,26.98,14.50,16.97,34.77,28.73,46.17,
92.50,14.92)
sum(values)
sum(values)/26
769.08/26
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/sectionIndex.R', echo=TRUE)
length(values)
sum(values)
1350/2
q()
dat_hg <- read.table("/Users/youweizheng/Google Drive/HusbandStock/20140715HG.txt")
q()
dat_hg <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/huigou.xlsx",
sheetName = "Sheet1")
library(xlsx)
dat_hg <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/huigou.xlsx",
sheetName = "Sheet1")
View(dat_hg)
dat_hg$byMonth <- floor_date(dat_hg$Date, "month")
library(lubridate)
library(plyr)
dat_hg$byMonth <- floor_date(dat_hg$Date, "month")
View(dat_hg)
monthly_hg <- ddply(dat_hg, "byMonth", summarise, monthly = sum(Profit))
source('~/Google Drive/HusbandStock/analysis.R', echo=TRUE)
q()
rm(list=ls())
cat("\014")
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
dat_tr$Profit <- as.numeric(dat_tr$Profit)
## ----- sum up all single-trade profits
total_tr_profit <- sum(as.numeric(dat_tr$Profit),na.rm=TRUE)
library(lubridate)
library(plyr)
dat_tr$byMonth <- floor_date(dat_tr$Date, "month")
monthly_tr <- ddply(dat_tr, "byMonth", summarise, monthly = sum(Profit))
dat_br <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/broker.xlsx",
sheetName = "Sheet1")
total_br_profit <- sum(dat_br$Income,na.rm=TRUE)
dat_hg <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/huigou.xlsx",
sheetName = "Sheet1")
dat_hg$byMonth <- floor_date(dat_hg$Date, "month")
monthly_hg <- ddply(dat_hg, "byMonth", summarise, monthly = sum(Profit))
cat("\014")
sprintf("total trade profit: %.2f", total_tr_profit)
monthly_tr
monthly_hg
sprintf("total trade profit: %.2f", total_tr_profit)
monthly_tr
monthly_hg
sprintf("total broker profit: %.2f", total_br_profit)
sprintf("total trade profit: %.2f", total_tr_profit)
monthly_tr
monthly_hg
sprintf("total broker income: %.2f", total_br_profit)
q()
source("http://bioconductor.org/biocLite.R")
biocLite("rhdf5")
created <- h5createFile("example.h5")
h5createFile("myhdf5file.h5")
library("rhdf5")
created <- h5createFile("example.h5")
?hdf5s
?h5ls
q()
library("rhdf5")
created <- h5createFile("example.h5")
created <- h5createFile("exampleHDF5.h5")
h5createGroup("exampleHDF5.h5","foo")
h5createGroup("exampleHDF5.h5","foo/foobaa")
h5ls("exampleHDF5.h5")
h5createGroup("exampleHDF5.h5","baa")
h5ls("exampleHDF5.h5")
h5createGroup("exampleHDF5.h5","baa")
A <- matrix(1:10,nr=5,nc=2)
A
h5write(A,"exampleHDF5.h5","foo/A")
h5ls("exampleHDF5.h5")
h5write(A,"exampleHDF5.h5","A")
h5ls("exampleHDF5.h5")
B <- array(seq(0.1,2.0,by=0.1),dim=c(5,2,2))
class(A)
class(B)
C <- c(5,2,2)
class(C)
h5write(A,"exampleHDF5.h5","baa/B")
h5ls("exampleHDF5.h5")
h5ls("/Users/youweizheng/Google Drive/AAAAA/rep2.h5")
h5ls("/Users/youweizheng/Google Drive/AAAAA/rep2.h5")
C = matrix(paste(LETTERS[1:10],LETTERS[11:20], collapse=""),nr=2,nc=5)
class(C)
class(B)
B
B[1]
B[2]
A
A[1]
A[1,1]
A[1,2]
A[2,2]
array
B
B[,,1]
B[,,1][1,1]
B[,,1][1,2]
B
C
A
?matrix
h5write(C, "myhdf5file.h5","foo/foobaa/C")
rm(list=ls())
cat("\014")
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
A <- matrix(1:10,nr=5,nc=2)
h5write(A,filename,"foo/A")
B <- array(seq(0.1,2.0,by=0.1),dim=c(5,2,2))
h5write(B,filename,"baa/B")
h5write(B,filename,"foo/B")
C = matrix(paste(LETTERS[1:10],LETTERS[11:20], collapse=""),nr=2,nc=5)
h5write(C,filename,"foo/foobaa/C")
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
h5write(B,filename,"baa/B")
source('~/githubrepo/datasciencecoursera/GettingAndCleaningData/UsingRhdf5.R', echo=TRUE)
h5ls(filename)
h5write(B,filename,"baa/B")
h5ls(filename)
D = h5read(filename,"foo/A")
attr(B, "scale") <- "liter"
B
attr(B)
attributes(B)
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
h5createGroup(filename2,"foo")
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
rm(list=ls())
cat("\014")
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
rm(list=ls())
cat("\014")
filename2 <- "exampleHDF5_2.h5"
h5createFile(filename2)
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
h5read(filename2,"foo/S")
filename2 <- "exampleHDF5_2.h5"
if (!file.exists("filename2")) {
h5createFile(filename2)
}
filename2 <- "exampleHDF5_2.h5"
if (!file.exists("filename2")) {
h5createFile(filename2)
}
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(4,8),storage.mode="integer",chunk=c(5,1),level=7)
h5read(filename2,"foo/S")
?h5createDataset
filename2 <- "exampleHDF5_2.h5"
if (!file.exists("filename2")) {
h5createFile(filename2)
}
h5createGroup(filename2,"foo")
h5createDataset(filename2,"foo/S",c(4,8),storage.mode="integer",chunk=c(4,1),level=7)
h5read(filename2,"foo/S")
h5write(matrix(1:5,nr=5,nc=1),filename,"foo/S",list(NULL,1))
h5write(matrix(1:5,nr=5,nc=1),filename2,"foo/S",list(NULL,1))
h5write(matrix(1:5,nr=5,nc=1),file=filename2,name="foo/S",indiex=list(NULL,1))
h5write(matrix(1:5,nr=4,nc=1),file=filename2,name="foo/S",indiex=list(NULL,1))
h5write(matrix(1:4,nr=4,nc=1),file=filename2,name="foo/S",indiex=list(NULL,1))
h5write(matrix(1:4,nr=4,nc=1),file=filename2,name="foo/S",index=list(NULL,1))
h5read(filename2,"foo/S")
?h5write
list(1,2:8)
h5write(matrix(2:8,nr=1,nc=7),file=filename2,name="foo/S",index=list(1,2:8))
h5read(filename2,"foo/S")
h5write(matrix(1:8,nr=2,nc=4),file=filename2,name="foo/S",index=list(3:4,5:8))
h5read(filename2,"foo/S")
h5read(filename,"foo/S",index=list(3:4,1:2))
h5read(filename2,"foo/S",index=list(3:4,1:2))
h5read(filename2,"foo/S",index=list(3:4,c(2,4,6)))
q()
getwd()
q()
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/usingRhdf5.R', echo=TRUE)
filename <- "exampleHDF5.h5"
file.remove(filename)
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/usingRhdf5.R', echo=TRUE)
q()
18.02*500
7.21/9010
q()
library(xlsx)
dat_tr <- read.xlsx("/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
sheetName = "Sheet1",colIndex=c(1,2,3,4))
i <- sapply(dat_tr, is.factor)
dat_tr[i] <- lapply(dat_tr[i], as.character)
library(lubridate)
newtrade <- c(as(today(),"character"),"股息红利","133.00","NA")
dat_tr_new <- rbind(dat_tr,newtrade)
write.xlsx2(dat_tr_new,
"/Users/youweizheng/Google Drive/HusbandStock/trades.xlsx",
row.names=FALSE)
q()
source('~/Google Drive/HusbandStock/analysis.R', echo=TRUE)
q()
source('~/Google Drive/githubrepo/datasciencecoursera/GettingAndCleaningData/usingRhdf5.R', echo=TRUE)
h5createDataset(filename,"foo/H",c(5,8),storage.mode="integer",chunk=c(5,1),level=7)
h5read(filename,"foo/H")
h5write(matrix(1:5,nr=5,nc=1),file=filename,name="foo/H",start=c(1,1))
h5read(filename,"foo/H")
h5write(matrix(1:5,nr=5,nc=1),file=filename,name="foo/H",start=c(4,1))
h5write(matrix(1:5,nr=5,nc=1),file=filename,name="foo/H",start=c(1,4))
h5read(filename,"foo/H")
h5write(6:10,file=filename,name="foo/H",start=c(1,2),count=c(1,5))
h5read(filename,"foo/H")
h5write(6:10,file=filename,name="foo/H",start=c(1,2),count=c(1,4))
h5write(matrix(6:10,nr=1,nc=5),file=filename,name="foo/H",start=c(1,2))
h5read(filename,"foo/H")
matrix(11:40,nr=5,nc=6)
matrix(11:40,nr=5,nc=5)
h5write(matrix(6:10,nr=5,nc=1),file=filename,name="foo/H",start=c(1,2),count=c(1,5))
h5read(filename,"foo/H")
h5write(matrix(11:40,nr=5,nc=6),file=filename,name="foo/H",start=c(1,3))
h5read(filename,"foo/H")
h5write(matrix(120:123,nr=2,nc=2),file=filename,name="foo/H",start=c(4,1))
h5read(filename,"foo/H")
h5write(matrix(151:154,nr=2,nc=2),file=filename,name="foo/H",start=c(2,3),
stride=c(3,1))
h5read(filename,"foo/H")
h5write(matrix(151:154,nr=2,nc=2),file=filename,name="foo/H",start=c(2,3),
stride=c(3,2))
h5read(filename,"foo/H")
h5read(filename,"foo/H",start=c(2,2),count=c(2,2))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3), stride=c(1,2))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3), stride=c(1,2))
h5read(filename,"foo/H",start=c(3,3),count=c(2,3), stride=c(1,2),block=c(1,2))
h5dump(filename)
h5ls(filename)
h5save(W,Y,Z,file=filename)
W <- 1:7
Y <- 1:18
Z <- seq(0,1,0.1)
h5save(W,Y,Z,file=filename)
h5ls(filename)
h5ls(filename,all=TRUE)
rm(list=ls())
cat("\014")
h5dump(filename)
filename <- "exampleHDF5.h5"
h5dump(filename)
D <- h5dump(filename)
D
D$W
D$Y
D$Z
D$foo
D$foo$H
toLatex(sessionInfo())
q()
install.packages("RMySQL")
?dbConnect
library(RMySQL)
install.packages("RMySQL")
install.packages('RMySQL', type='source')
library(RMySQL)
q()
install.packages('RMySQL', type='source')
library(RMySQL)
?dbConnect
q()
